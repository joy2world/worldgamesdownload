"use strict";(self.__LOADABLE_LOADED_CHUNKS__=self.__LOADABLE_LOADED_CHUNKS__||[]).push([[98131,9136],{748455:function(e,t,a){a.r(t),a.d(t,{VideoWrapper:function(){return W},default:function(){return B},getPlaylistSourceSrc:function(){return N}});var r=a(793550),n=a(575429),o=a(484898),i=a(34411),l=a(549135),s=a(181307),c=a(585967),u=a(218265),d=a(37879),p=a(208757),y=a(80209);function f(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function m(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?f(Object(a),!0).forEach((function(t){k(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):f(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=D(e);if(t){var n=D(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return P(this,a)}}function P(e,t){if(t&&("object"===E(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function E(e){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function T(e,t){if(!e||void 0===e)return"undefined";if("string"==typeof e){var a=e;if(t){var r="control"===t?"v1.pinimg.com":"v2.pinimg.com";a=e.replace("v.pinimg.com",r)}return a}if(Array.isArray(e)&&e[0].src){var n=e[0].src;if(t){var o="control"===t?"v1.pinimg.com":"v2.pinimg.com";n=n.replace("v.pinimg.com",o)}return n}return"unsupported_type_".concat(E(e))}var w=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(o,e);var t,a,r,n=S(o);function o(){var e;b(this,o);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return k(g(e=n.call.apply(n,[this].concat(a))),"state",{canPlayVideo:!1,playbackState:p.Cy.DEFAULT}),k(g(e),"errorRetryCount",2),k(g(e),"hasSegmentStarted",!1),k(g(e),"hasPlaybackStarted",!1),k(g(e),"hasVideoSessionStarted",!1),k(g(e),"hasVideoSessionEnded",!1),k(g(e),"lastStartPlayTime",null),k(g(e),"lastStallTime",null),k(g(e),"lastPauseTime",null),k(g(e),"logSessionStartOnNextPlay",!1),k(g(e),"playerId",""),k(g(e),"videoRefSetTime",null),k(g(e),"videoSessionId",""),k(g(e),"videoVisibleTime",null),k(g(e),"playbackPerformance",{canPlayTime:null,detailedErrors:"",errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:T(e.props.src,e.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0}),k(g(e),"componentDidMount",(function(){var t=e.props,a=t.contextLogData,r=void 0===a?{}:a,n=t.playing,o=r.is_closeup_video,i=void 0!==o&&o;(0,d.tE)("videoMounted",!1,i),n&&(e.videoVisibleTime=new Date,e.logPlaybackPerformance(p.DR,{initiator:"mount"}))})),k(g(e),"componentDidUpdate",(function(t){var a=e.props,r=a.playing,n=a.visible,o=a.appInFocus;t.appInFocus&&!o&&(e.logPlaybackPerformance(p.$f,{initiator:"update"}),e.logSessionStartOnNextPlay=!0),t.visible&&!1===n&&(e.logSessionStartOnNextPlay=!1,e.updatePauseDuration(),e.logPlaybackPerformance(p.$f,{initiator:"update"})),!1===t.visible&&!0===n&&(e.videoVisibleTime=e.videoVisibleTime||new Date,r?(e.setPlaybackStartTime(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.logPlaybackPerformance(p.DR,{initiator:"update"})):e.logSessionStartOnNextPlay=!0),r&&o&&e.logSessionStartOnNextPlay&&(e.setPlaybackStartTime(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.logPlaybackPerformance(p.DR,{initiator:"update"}),e.logSessionStartOnNextPlay=!1)})),k(g(e),"addSegment",(function(){var t=e.playbackPerformance,a=t.canPlayTime,r=t.loadStartTime,n=t.segments,o=t.srcString,i=-1;a&&r&&0===n.length&&(i=a>r?a-r:0);var l=e.videoPlayerRef&&e.videoPlayerRef.video,s={indicatedKbps:-1,duration:l&&l.duration*p.gJ||-1,lastStartPlayTime:null,level:-1,numServerAddressChange:-1,observedKbps:-1,playbackStartDate:null,serverAddress:"",sourceWidth:-1,sourceHeight:-1,startupTimeMs:i,switchBitrateKbps:-1,uri:o,viewportWidth:l&&l.clientWidth||-1,viewportHeight:l&&l.clientHeight||-1,watchedDurationMs:0};n.push(s)})),k(g(e),"getCurrentVideoTime",(function(){return e.videoPlayerRef&&e.videoPlayerRef.video?e.videoPlayerRef.video.currentTime*p.gJ:0})),k(g(e),"getVideoResourceTiming",(function(){var t,a;if(null!==(t=window)&&void 0!==t&&null!==(a=t.performance)&&void 0!==a&&a.getEntriesByName&&e.playbackPerformance.srcString){var r=window.performance.getEntriesByName(e.playbackPerformance.srcString);return r.length>0&&r[0]||null}return null})),k(g(e),"handleCanPlayVideo",(function(t){var a=e.props,r=a.contextLogData,n=void 0===r?{}:r,o=a.onReady,i=a.playing,l=a.videoStartTime,s=n.is_closeup_video,c=void 0!==s&&s,u=e.state.canPlayVideo;(0,d.tE)("handleCanPlayVideo",!1,c,{firstCanPlayEvent:!u,playing:i}),e.playbackPerformance.hasFatalError=!1,u||(e.playbackPerformance.canPlayTime=new Date,null!=l&&e.videoPlayerRef&&e.videoPlayerRef.video&&(e.videoPlayerRef.video.currentTime=l)),e.setState({canPlayVideo:!0}),o&&o(t)})),k(g(e),"handleEnded",(function(t){var a=e.props,r=a.loop,n=a.onEnded,o=e.playbackPerformance.segments,i=o&&o[o.length-1];r&&e.videoPlayerRef&&e.videoPlayerRef.video?(e.updateWatchDurationForCurrentSegment(),i&&(i.lastStartPlayTime=0),e.hasSegmentStarted=!1):r||e.logPlaybackPerformance(p.$f,{initiator:"videoEnded",loop:r}),e.setState({playbackState:p.Cy.ENDED}),n&&n(t)})),k(g(e),"handleError",(function(){var t,a,r,n,o,i,l,s,c=e.props.contextLogData,u=(void 0===c?{}:c).is_closeup_video,y=void 0!==u&&u,f=e.videoPlayerRef&&e.videoPlayerRef.video;(null==f||null===(t=f.error)||void 0===t?void 0:t.code)!==p.lG.MEDIA_ERR_ABORTED&&(e.playbackPerformance.hasFatalError=!0),e.playbackPerformance.detailedErrors+="".concat(e.playbackPerformance.detailedErrors.length>0?", ":"").concat((null==f||null===(a=f.error)||void 0===a?void 0:a.message)||""),e.playbackPerformance.errorCode=(null==f||null===(r=f.error)||void 0===r?void 0:r.code)||0,e.playbackPerformance.errorName=(null==f||null===(n=f.error)||void 0===n||null===(o=n.message)||void 0===o?void 0:o.slice(0,100))||"unknown",e.playbackPerformance.errorReason=(null==f||null===(i=f.error)||void 0===i||null===(l=i.message)||void 0===l?void 0:l.slice(0,100))||"unknown";var m={errorName:e.playbackPerformance.errorCode,errorReason:e.playbackPerformance.errorName,errorRetryCount:e.errorRetryCount,playbackState:e.state.playbackState,networkState:(null==f?void 0:f.networkState)||"unknown"};switch((0,d.tE)("fatalError",!1,y,m),null==f||null===(s=f.error)||void 0===s?void 0:s.code){case p.lG.MEDIA_ERR_ABORTED:break;case p.lG.MEDIA_ERR_NETWORK:case p.lG.MEDIA_ERR_DECODE:case p.lG.MEDIA_ERR_SRC_NOT_SUPPORTED:default:e.errorRetryCount>0&&(null==f||f.load(),e.errorRetryCount-=1)}e.updateWatchDurationForCurrentSegment(),e.setState({playbackState:p.Cy.FAILED})})),k(g(e),"handleLoadedMetadata",(function(){e.setState({playbackState:p.Cy.LOADED_METADATA})})),k(g(e),"handleLoadStart",(function(){e.playbackPerformance.loadStartTime=new Date,e.setState({playbackState:p.Cy.LOAD_START})})),k(g(e),"handleLoadedData",(function(){e.setState({playbackState:p.Cy.LOADED_DATA})})),k(g(e),"handlePlaying",(function(){e.playbackPerformance.hasFatalError=!1,e.setPlaybackStartTime(),e.hasSegmentStarted||e.addSegment(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.updateStallDuration(),e.updatePauseDuration(),e.setState({playbackState:p.Cy.PLAYING})})),k(g(e),"handleUserPause",(function(t){var a=e.props.onPause;e.lastPauseTime=new Date,a&&a(t)})),k(g(e),"handleVideoPause",(function(){e.state.playbackState!==p.Cy.STALLING&&e.state.playbackState!==p.Cy.SEEKING&&(e.updateWatchDurationForCurrentSegment(),e.lastPauseTime||e.updateStallDuration()),e.setState({playbackState:p.Cy.PAUSED})})),k(g(e),"handleSeeking",(function(){e.playbackPerformance.numberOfSeeks+=1;var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&(a.lastStartPlayTime=null),e.state.playbackState!==p.Cy.ENDED&&e.setState({playbackState:p.Cy.SEEKING})})),k(g(e),"handleStalled",(function(){null===e.lastStallTime&&e.state.playbackState!==p.Cy.ENDED&&(e.lastStallTime=new Date,e.playbackPerformance.numberOfStalls+=1,e.setState({playbackState:p.Cy.STALLING}))})),k(g(e),"handleTimeUpdate",(function(t){var a=e.props.onTimeChange;a&&a(t),e.state.playbackState===p.Cy.PLAYING&&(e.updateWatchDurationForCurrentSegment(),e.setLastSegmentStartPlayTime())})),k(g(e),"resetPlaybackMetrics",(function(){e.hasSegmentStarted=!0,e.hasPlaybackStarted=!1,e.hasVideoSessionStarted=!1,e.hasVideoSessionEnded=!0,e.lastStallTime=null,e.lastPauseTime=null,e.videoSessionId="",e.videoVisibleTime=null,e.logSessionStartOnNextPlay=!1;var t=m(m({},e.playbackPerformance.segments[e.playbackPerformance.segments.length-1]),{},{lastStartPlayTime:null,playbackStartDate:null,watchedDurationMs:0});e.playbackPerformance.detailedErrors="",e.playbackPerformance.errorCode=0,e.playbackPerformance.errorName="",e.playbackPerformance.errorReason="",e.playbackPerformance.hasFatalError=!1,e.playbackPerformance.numberOfStalls=0,e.playbackPerformance.numberOfSeeks=0,e.playbackPerformance.playbackStartTimestamp=null,e.playbackPerformance.totalStallDurationMs=0,e.playbackPerformance.segments=[t]})),k(g(e),"setLastSegmentStartPlayTime",(function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&null===a.lastStartPlayTime&&(a.lastStartPlayTime=e.getCurrentVideoTime())})),k(g(e),"setLastSegmentPlaybackStartDate",(function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&null===a.playbackStartDate&&(a.playbackStartDate=Date.now())})),k(g(e),"setPlaybackStartTime",(function(){e.hasPlaybackStarted||(e.playbackPerformance.playbackStartTimestamp=Date.now(),e.hasPlaybackStarted=!0)})),k(g(e),"setVideoPlayerRef",(function(t){var a=e.props.setVideoRef;if(t&&(a&&a(t),e.videoPlayerRef=t,e.videoPlayerRef.video)){var r=e.videoPlayerRef.video;r.addEventListener("loadedmetadata",e.handleLoadedMetadata),r.addEventListener("loadeddata",e.handleLoadedData),r.addEventListener("pause",e.handleVideoPause),r.readyState>=3&&(e.setState({canPlayVideo:!0}),e.playbackPerformance.canPlayTime=new Date)}})),k(g(e),"updateStallDuration",(function(){if(null!==e.lastStallTime){var t=e.lastStallTime;e.playbackPerformance.totalStallDurationMs+=new Date-t,e.lastStallTime=null}})),k(g(e),"updatePauseDuration",(function(){if(null!==e.lastPauseTime){var t=e.lastPauseTime;e.playbackPerformance.totalPauseDurationMs+=new Date-t,e.lastPauseTime=null}})),k(g(e),"updateWatchDurationForCurrentSegment",(function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1],r=a?a.lastStartPlayTime:null,n=e.getCurrentVideoTime();if(a&&null!==r&&"number"==typeof n&&"number"==typeof r){var o=n-r;o>0&&(a.watchedDurationMs+=o,a.lastStartPlayTime=null)}})),k(g(e),"logPlaybackPerformance",(function(t,a){var r=e.props,n=r.contextLogData,o=void 0===n?{}:n,i=r.userId,s=r.isAutoPlay,c=o.is_closeup_video,u=void 0!==c&&c,y=e.playbackPerformance,f=y.canPlayTime,b=y.detailedErrors,v=y.errorCode,h=y.errorName,S=y.errorReason,P=y.hasFatalError,g=y.loadStartTime,D=y.totalPauseDurationMs,k=y.totalStallDurationMs,E=y.numberOfStalls,T=y.numberOfSeeks,w=y.playbackStartTimestamp,R=y.segments,O=y.srcString,L=e.videoPlayerRef&&e.videoPlayerRef.video,C=t===p.DR,_=C&&!e.hasVideoSessionStarted,M=!C&&!e.hasVideoSessionEnded&&e.hasVideoSessionStarted;if(L&&(_||M)){var A,V=-1;f&&g&&(V=f>g?f-g:0);var j=-1;f&&e.videoVisibleTime&&(j=f>e.videoVisibleTime?f-e.videoVisibleTime:0),C&&(e.videoSessionId=(0,p.Y7)(i),e.playerId=e.playerId||(0,p.EB)());var I=e.getVideoResourceTiming(),F={averageVideoKbps:-1,autoplaying:s,detailedErrors:b,downloadedKiloBytes:"number"==typeof(null==I?void 0:I.decodedBodySize)&&I.decodedBodySize/p.Fm||0,errorCode:v,errorName:h,errorReason:S,fatalError:P,isCellular:!1,nativeVideoDurationMs:L.duration*p.gJ||-1,numberOfStalls:E,numberOfSeeks:T,overallPausedDurationMs:D,overallBufferDurationMs:k,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:e.videoSessionId,playbackStartTimestamp:w||-1,segments:[],sessionMark:t,screenPixelScale:null!==(A=window)&&void 0!==A&&A.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:L.clientWidth,startupPlayerHeight:L.clientHeight,startupTimeMs:V,startupLatencyMs:j,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:L.videoWidth,startupVariantHeight:L.videoHeight,videoUrl:O};if(!C){e.updateWatchDurationForCurrentSegment(),e.updateStallDuration();var x=R.reduce((function(e,t){return e+(t.watchedDurationMs||0)}),0);F.overallWatchedDurationMs=x,F.startupVariantWatchedDurationMs=x,F.segments=e.playbackPerformance.segments,0===x?(F.errorName="invalid_watch_duration",F.rebufferRate=-1):F.rebufferRate=k/x}(0,d.ZP)(F,!1,u,m({playbackState:e.state.playbackState},a)),(0,l.j)(3606,m(m({},o),{},{is_closeup_video:u,playback_session_id:e.videoSessionId,eventData:{videoPerformanceData:F}})),C?(e.hasVideoSessionStarted=!0,e.hasVideoSessionEnded=!1):e.resetPlaybackMetrics(),(0,d.tE)(C?"sessionStart":"sessionEnd",!1,u,m({playbackState:e.state.playbackState},a))}})),e}return t=o,(a=[{key:"componentWillUnmount",value:function(){var e=this.props.loop;this.updatePauseDuration(),this.logPlaybackPerformance(p.$f,{initiator:"unmount",loop:e})}},{key:"render",value:function(){var e=this.props,t=e.accessibilityMaximizeLabel,a=e.accessibilityMinimizeLabel,r=e.accessibilityMuteLabel,n=e.accessibilityPauseLabel,o=e.accessibilityPlayLabel,i=e.accessibilityUnmuteLabel,l=e.aspectRatio,s=e.captions,c=e.controls,d=e.loop,p=e.loopOverride,f=e.objectFit,m=e.onDurationChange,b=e.onFullscreenChange,v=e.onLoadedChange,h=e.onPlay,S=e.onPlayheadDown,P=e.onPlayheadUp,g=e.onSeek,D=e.onVolumeChange,k=e.playbackRate,E=e.playing,w=e.playsInline,R=e.poster,O=e.preload,L=e.src,C=e.volume,_=this.state.canPlayVideo;return(0,y.jsx)(u.nk,{accessibilityMaximizeLabel:t,accessibilityMinimizeLabel:a,accessibilityMuteLabel:r,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityUnmuteLabel:i,aspectRatio:l,captions:s,controls:c,loop:void 0===p?d:p,objectFit:f,onDurationChange:m,onEnded:this.handleEnded,onError:this.handleError,onFullscreenChange:b,onLoadedChange:v,onLoadStart:this.handleLoadStart,onPause:this.handleUserPause,onPlay:h,onPlaying:this.handlePlaying,onPlayheadDown:S,onPlayheadUp:P,onReady:this.handleCanPlayVideo,onSeek:g,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:D,onWaiting:this.handleStalled,playbackRate:k,playing:_&&E,playsInline:w,poster:R,preload:O,ref:this.setVideoPlayerRef,src:T(L,this.props.quicExpGroup),volume:C})}}])&&v(t.prototype,a),r&&v(t,r),o}(r.Component);var R=(0,r.memo)((function(e){var t=(0,c.B)(),a=t.country,r=t.isAuthenticated,o=t.isBot,l=t.isSocialBot,u=t.unauthId,p=t.userAgent,f=p.browserName,b=p.browserVersion,v=p.isMobile,h=e.contextLogData,S=void 0===h?{}:h,P=S.is_closeup_video,g=void 0!==P&&P,D=S.view,k=S.viewParameter,E=(0,n.useSelector)((function(e){return e.ui.app})).appInFocus,T=(0,s.tc)("web_video_quic"),R=null;r&&(R=T().group.length?T().group:null);var O=(0,i.Z)(),L={browserName:f,browserVersion:b,country:a,isAuthenticated:r,isBot:o,is_closeup_video:g,isMobile:v,isSocialBot:l,view:D,viewParameter:k};return(0,d.r$)(L),(0,y.jsx)(w,m(m({},e),{},{userId:O.id||u,appInFocus:E,quicExpGroup:R}))})),O=a(170308);function L(e){return(L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function C(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function _(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?C(Object(a),!0).forEach((function(t){x(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):C(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function M(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function A(e,t){return(A=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function V(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=F(e);if(t){var n=F(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return j(this,a)}}function j(e,t){if(t&&("object"===L(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function F(e){return(F=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function x(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var N=function(e){if(Array.isArray(e)){var t=e.find((function(e){return"video/m3u8"===e.type}));return t?t.src:void 0}return RegExp("m3u8$").test(e)?e:void 0},W=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&A(e,t)}(i,e);var t,a,r,n=V(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),x(I(t=n.call(this,e)),"componentDidUpdate",(function(e,a){var r;e.videoStartTime&&t.props.videoStartTime&&e.videoStartTime<t.props.videoStartTime&&null!==(r=t.videoPlayerRef)&&void 0!==r&&r.video&&(t.videoPlayerRef.video.currentTime=t.props.videoStartTime)})),x(I(t),"setVideoPlayerRef",(function(e){e&&(t.videoPlayerRef=e)})),x(I(t),"handleOnEnded",(function(e){var a=e.event,r=t.props,n=r.loop,o=r.onLoop,i=r.onEnded;i&&(i({event:a}),t.videoPlayerRef&&t.videoPlayerRef.video&&n&&(t.videoPlayerRef.video.play(),o&&o()))}));var a=N(e.src);return t.state={useHlsVideo:!e.preferMp4&&!o.Z.isSafari()&&!!a},t}return t=i,(a=[{key:"render",value:function(){var e=this.props,t=e.accessibilityMaximizeLabel,a=e.accessibilityMinimizeLabel,r=e.accessibilityMuteLabel,n=e.accessibilityPauseLabel,o=e.accessibilityPlayLabel,i=e.accessibilityUnmuteLabel,l=e.aspectRatio,s=e.appInFocus,c=e.captions,u=e.contextLogData,d=e.controls,p=e.hlsConfig,f=e.isAutoPlay,m=e.loop,b=e.objectFit,v=e.onDurationChange,h=e.onEnded,S=e.onFullscreenChange,P=e.onLoadedChange,g=e.onPause,D=e.onPlay,k=e.onPlayheadDown,E=e.onPlayheadUp,T=e.onReady,w=e.onSeek,L=e.onTimeChange,C=e.onVolumeChange,M=e.playbackRate,A=e.playing,V=e.playsInline,j=e.poster,I=e.preferMp4,F=e.preload,x=e.src,W=e.videoStartTime,B=e.visible,H=e.volume,U=this.state.useHlsVideo,K=N(x),G=_(_({},p),{},{startPosition:W||-1}),z=!h&&m;return U&&K?(0,y.jsx)(O.Z,{accessibilityMaximizeLabel:t,accessibilityMinimizeLabel:a,accessibilityMuteLabel:r,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityUnmuteLabel:i,aspectRatio:l,appInFocus:s,captions:c,contextLogData:u,controls:d,hlsConfig:G,isAutoPlay:f,loop:m,loopOverride:z,onDurationChange:v,onEnded:this.handleOnEnded,onFullscreenChange:S,onLoadedChange:P,onPause:g,onPlay:D,onPlayheadDown:k,onPlayheadUp:E,onReady:T,onSeek:w,onTimeChange:L,onVolumeChange:C,playbackRate:M,playing:A,playsInline:V,poster:j,preload:F,setVideoRef:this.setVideoPlayerRef,src:K,visible:B,volume:H}):(0,y.jsx)(R,{accessibilityMaximizeLabel:t,accessibilityMinimizeLabel:a,accessibilityMuteLabel:r,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityUnmuteLabel:i,aspectRatio:l,captions:c,contextLogData:u,controls:d,isAutoPlay:f,loop:m,loopOverride:z,objectFit:b,onDurationChange:v,onEnded:this.handleOnEnded,onFullscreenChange:S,onLoadedChange:P,onPause:g,onPlay:D,onPlayheadDown:k,onPlayheadUp:E,onReady:T,onSeek:w,onTimeChange:L,onVolumeChange:C,playbackRate:M,playing:A,playsInline:V,poster:j,preload:F,setVideoRef:this.setVideoPlayerRef,src:I?x:K||x,videoStartTime:W,visible:B,volume:H})}}])&&M(t.prototype,a),r&&M(t,r),i}(r.PureComponent);function B(e){var t=(0,n.useSelector)((function(e){return e.ui.app})).appInFocus;return(0,y.jsx)(W,_(_({},e),{},{appInFocus:t}))}},80078:function(e,t,a){a.d(t,{VS:function(){return r},HJ:function(){return n},iM:function(){return o}});var r=2,n="V_HLSV3_MOBILE",o=[0,.01,.02,.03,.04,.05,.06,.07,.08,.09,.1,.11,.12,.13,.14,.15,.16,.17,.18,.19,.2,.21,.22,.23,.24,.25,.26,.27,.28,.29,.3,.31,.32,.33,.34,.35,.36,.37,.38,.39,.4,.41,.42,.43,.44,.45,.46,.47,.48,.49,.5,.51,.52,.53,.54,.55,.56,.57,.58,.59,.6,.61,.62,.63,.64,.65,.66,.67,.68,.69,.7,.71,.72,.73,.74,.75,.76,.77,.78,.79,.8,.81,.82,.83,.84,.85,.86,.87,.88,.89,.9,.91,.92,.93,.94,.95,.96,.97,.98,.99,1]},37879:function(e,t,a){a.d(t,{r$:function(){return m},tE:function(){return b},ZP:function(){return v}});var r=a(265355),n=a(731164),o=a(208757);function i(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var a=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null==a)return;var r,n,o=[],i=!0,l=!1;try{for(a=a.call(e);!(i=(r=a.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(s){l=!0,n=s}finally{try{i||null==a.return||a.return()}finally{if(l)throw n}}return o}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return l(e,t);var a=Object.prototype.toString.call(e).slice(8,-1);"Object"===a&&e.constructor&&(a=e.constructor.name);if("Map"===a||"Set"===a)return Array.from(e);if("Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return l(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(e,t){(null==t||t>e.length)&&(t=e.length);for(var a=0,r=new Array(t);a<t;a++)r[a]=e[a];return r}function s(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function c(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?s(Object(a),!0).forEach((function(t){u(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):s(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function u(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var d=["isCellular","videoUrl","sessionMark"],p={},y="",f=function(e){return e<0?"negative":0===e?"zero":e<200?"xs":e<400?"s":e<600?"m":e<800?"l":e<1e3?"xl":e<1200?"xxl":"over1200"},m=function(e){var t=e.browserName,a=e.browserVersion,n=e.country,o=e.isAuthenticated,i=e.isBot,l=e.isMobile,s=e.isSocialBot,c=e.view,u=void 0===c?"unknown":c,d=e.viewParameter,f=void 0===d?"unknown":d;y=(s?"socialBot":i&&"bot")||"nonbot";var m=(0,r.Z)(n);p={browserName:t,browserVersion:(null==a?void 0:a.split(".")[0])||"0",isAuthenticated:o,isMobile:l,region:m,view:u,viewParameter:f}};function b(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=a?"closeup":"nonCloseup",i=t?"hls":"nonHls",l=c(c({},r),p),s="web.video.".concat(i,".").concat(y,".").concat(o,".").concat(e);n.Z.increment(s,1,l)}function v(e,t,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},l=a?"closeup":"nonCloseup",s=t?"hls":"nonHls",u=e.sessionMark===o.DR?"sessionStart":"sessionEnd",m=c(c({},r),p);if(Object.entries(e).forEach((function(t){var a=i(t,2),r=a[0],o=a[1],p="web.video.".concat(s,".").concat(y,".").concat(l,".").concat(u,".").concat(r),b=parseInt(o,10),v="number"==typeof b?b:-1;if(!d.includes(r))if(r.includes("fatalError")&&!0===o){var h=e.errorCode,S=e.errorName,P=e.errorReason;n.Z.increment(p,1,c({errorCode:h,errorName:S,errorReason:P},m))}else if(r.includes("Width")||r.includes("Height")){var g=f(v);n.Z.increment(p,1,c({dimensionBucket:g},m))}else if("numberOfStalls"===r){var D=o;v>1e3?D="over1000":v>10?D="over10":v<0&&(D="negative"),n.Z.increment(p,1,c({numberOfStalls:D},m))}else"screenPixelScale"===r?n.Z.increment(p,1,c({screenPixelScale:o||-1},m)):v>=0?(0===v&&n.Z.increment("".concat(p,".zero"),1,m),n.Z.timing(p,v,1),n.Z.timing("".concat(p,"_with_tags"),v,1,m)):v<0&&n.Z.increment("".concat(p,".negative"),1,m)})),e.sessionMark!==o.DR){var b=e.rebufferRate,v=e.screenPixelScale,h=e.startupLatencyMs,S=e.startupVariantWidth,P=e.startupPlayerWidth,g="web.video.".concat(s,".").concat(y,".").concat(l,".").concat(u);if("number"==typeof S&&"number"==typeof P&&"number"==typeof v){var D=1.5*S>v*P;n.Z.increment("".concat(g,".upscaled.").concat(D?"good":"bad"),1,m)}"number"==typeof h&&n.Z.increment("".concat(g,".startupLatency.").concat(h<500?"good":"bad"),1,m),"number"==typeof b&&n.Z.increment("".concat(g,".rebufferRate.").concat(b<.01?"good":"bad"),1,m)}}},208757:function(e,t,a){a.d(t,{DR:function(){return n},$f:function(){return o},gJ:function(){return i},bR:function(){return l},Fm:function(){return s},Cy:function(){return c},lG:function(){return u},Y7:function(){return d},EB:function(){return p}});var r=a(981444),n=1,o=2,i=1e3,l=1e3,s=1e3,c=Object.freeze({DEFAULT:0,LOAD_START:1,LOADED_METADATA:2,LOADED_DATA:3,PLAYING:4,PAUSED:5,SEEKING:6,STALLING:7,FAILED:8,ENDED:9}),u=Object.freeze({MEDIA_ERR_ABORTED:1,MEDIA_ERR_NETWORK:2,MEDIA_ERR_DECODE:3,MEDIA_ERR_SRC_NOT_SUPPORTED:4});function d(e){return e+"-"+(0,r.Z)()}function p(){return(0,r.Z)()}},170308:function(e,t,a){var r=a(793550),n=a(713529),o=a.n(n),i=a(304966),l=a(34411),s=a(181307),c=a(585967),u=a(218265),d=a(37879),p=a(208757),y=a(80209),f=["clientTrackingParams","component","durationNs","element","objectId","pairId","viewData","view","viewParameter"];function m(e,t){if(null==e)return{};var a,r,n=function(e,t){if(null==e)return{};var a,r,n={},o=Object.keys(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||(n[a]=e[a]);return n}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)a=o[r],t.indexOf(a)>=0||Object.prototype.propertyIsEnumerable.call(e,a)&&(n[a]=e[a])}return n}function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){for(var a=0;a<t.length;a++){var r=t[a];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function h(e,t){return(h=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function S(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var a,r=D(e);if(t){var n=D(this).constructor;a=Reflect.construct(r,arguments,n)}else a=r.apply(this,arguments);return P(this,a)}}function P(e,t){if(t&&("object"===w(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function D(e){return(D=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function k(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,r)}return a}function E(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?k(Object(a),!0).forEach((function(t){T(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):k(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}function T(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}function w(e){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}var R=function(e,t){if(t){var a="control"===t?"v1.pinimg.com":"v2.pinimg.com";return e.replace("v.pinimg.com",a)}return e},O=function(e,t){return"string"==typeof e?R(e,t):Array.isArray(e)?function(e,t){return e[0].src&&t?[E(E({},e[0]),{},{src:R(e[0].src,t)})]:e}(e,t):e},L=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&h(e,t)}(i,e);var t,a,r,n=S(i);function i(){var e;b(this,i);for(var t=arguments.length,a=new Array(t),r=0;r<t;r++)a[r]=arguments[r];return T(g(e=n.call.apply(n,[this].concat(a))),"state",{canPlayVideo:!1,isManifestParsed:!1,playbackState:p.Cy.DEFAULT}),T(g(e),"errorRetryCount",1),T(g(e),"firstFragBuffered",!1),T(g(e),"hasPlaybackStarted",!1),T(g(e),"hasVideoSessionStarted",!1),T(g(e),"hasVideoSessionEnded",!1),T(g(e),"hls",null),T(g(e),"fragStartupTime",{}),T(g(e),"lastLevelSwitchKbps",null),T(g(e),"lastStallTime",null),T(g(e),"lastPauseTime",null),T(g(e),"logSessionStartOnNextPlay",!1),T(g(e),"playerId",""),T(g(e),"videoSessionId",""),T(g(e),"videoVisibleTime",null),T(g(e),"playbackPerformance",{canPlayTime:null,detailedErrors:"",downloadedKiloBytes:0,errorCode:0,errorName:"",errorReason:"",hasFatalError:!1,loadStartTime:null,numberOfStalls:0,numberOfSeeks:0,playbackStartTimestamp:null,segments:[],srcString:"string"==typeof e.props.src?R(e.props.src,e.props.quicExpGroup):R(e.props.src[0].src,e.props.quicExpGroup),totalStallDurationMs:0,totalPauseDurationMs:0,videoCreatedTime:null}),T(g(e),"initializeHls",(function(){e.destroyHls();var t=e.props,a=t.src,r=t.hlsConfig,n=t.quicExpGroup,i=new(o())(r),l=O(a,n);i.loadSource(l),e.videoPlayerRef&&i.attachMedia(e.videoPlayerRef.video),i.on(o().Events.FRAG_BUFFERED,e.handleHlsFragBuffered),i.on(o().Events.FRAG_CHANGED,e.handleHlsFragChanged),i.on(o().Events.FRAG_LOADING,e.handleHlsFragLoading),i.on(o().Events.FRAG_LOADED,e.handleHlsFragLoaded),i.on(o().Events.MANIFEST_PARSED,(function(){e.setState({isManifestParsed:!0})})),i.on(o().Events.LEVEL_SWITCHED,e.handleHlsLevelSwitched),i.on(o().Events.ERROR,e.handleHlsError),e.hls=i})),T(g(e),"destroyHls",(function(){var t=g(e).hls;t&&t.destroy()})),T(g(e),"addSegment",(function(t){var a=e.playbackPerformance.segments,r=a&&a[a.length-1];if(e.hls&&a.length&&r&&r.uri!==t.url){e.updateWatchDurationForCurrentSegment();var n=e.videoPlayerRef&&e.videoPlayerRef.video,o=e.hls&&e.hls.levels||{},i="number"==typeof t.level?o[t.level]:{},l=e.fragStartupTime[t.url],s=-1;l&&l.startLoadTime&&l.endLoadTime&&(s=l.endLoadTime-l.startLoadTime);var c={indicatedKbps:i.bitrate/p.bR,duration:t.duration,level:t.level,lastStartPlayTime:e.getCurrentVideoTime(),numServerAddressChange:-1,observedKbps:e.hls&&e.hls.bandwidthEstimate/p.bR||-1,playbackStartDate:Date.now(),serverAddress:"",sn:t.sn,sourceWidth:i.width,sourceHeight:i.height,startupTimeMs:s,switchBitrateKbps:e.lastLevelSwitchKbps||-1,uri:t.url,viewportWidth:n&&n.clientWidth||-1,viewportHeight:n&&n.clientHeight||-1,watchedDurationMs:0};a.push(c)}})),T(g(e),"initializeSegments",(function(t){var a=e.props.contextLogData,r=(void 0===a?{}:a).is_closeup_video,n=void 0!==r&&r,o=e.playbackPerformance.segments;if(!o.length)if(e.hls&&e.videoPlayerRef&&e.videoPlayerRef.video&&t){if(!o.length&&"number"==typeof t.level){var i=e.videoPlayerRef&&e.videoPlayerRef.video,l=e.hls.levels,s="number"==typeof t.level?l[t.level]:{},c=e.fragStartupTime[t.url],u=-1;c&&c.startLoadTime&&c.endLoadTime&&(u=c.endLoadTime-c.startLoadTime),e.lastLevelSwitchKbps=e.hls.bandwidthEstimate/p.bR;var y={indicatedKbps:s.bitrate/p.bR,duration:t.duration,level:t.level,lastStartPlayTime:null,numServerAddressChange:-1,observedKbps:e.hls.bandwidthEstimate/p.bR||-1,playbackStartDate:null,serverAddress:"",sn:t.sn,sourceWidth:s.width,sourceHeight:s.height,startupTimeMs:u,switchBitrateKbps:e.lastLevelSwitchKbps||-1,uri:t.url,viewportWidth:i.clientWidth,viewportHeight:i.clientHeight,watchedDurationMs:0};o.push(y)}}else(0,d.tE)("initializeSegmentsFailed",!0,n)})),T(g(e),"getCurrentVideoTime",(function(){return e.videoPlayerRef&&e.videoPlayerRef.video?e.videoPlayerRef.video.currentTime*p.gJ:null})),T(g(e),"handleCanPlayVideo",(function(t){var a=e.props,r=a.contextLogData,n=void 0===r?{}:r,o=a.onReady,i=a.playing,l=n.is_closeup_video,s=void 0!==l&&l,c=e.state.canPlayVideo;(0,d.tE)("handleCanPlayVideo",!0,s,{firstCanPlayEvent:!c,playing:i}),e.playbackPerformance.hasFatalError=!1,c||(e.playbackPerformance.canPlayTime=new Date),e.setState({canPlayVideo:!0}),o&&o(t)})),T(g(e),"handleEnded",(function(t){var a=e.props,r=a.loop,n=a.onEnded,o=e.playbackPerformance.segments,i=o&&o[o.length-1];r&&e.videoPlayerRef&&e.videoPlayerRef.video?(e.updateWatchDurationForCurrentSegment(),i&&(i.lastStartPlayTime=0),e.fragStartupTime={}):r||e.logPlaybackPerformance(p.$f,{initiator:"videoEnded",loop:r}),e.setState({playbackState:p.Cy.ENDED}),n&&n(t)})),T(g(e),"handleHlsError",(function(t,a){var r,n=e.props.contextLogData,i=(void 0===n?{}:n).is_closeup_video,l=void 0!==i&&i;if(e.playbackPerformance.detailedErrors+="".concat(e.playbackPerformance.detailedErrors.length>0?", ":"").concat(a.details),a.fatal){var s,c,u,y;e.playbackPerformance.hasFatalError=!0,e.playbackPerformance.errorName=a.type,e.playbackPerformance.errorReason=a.details,e.playbackPerformance.errorCode=a.response&&a.response.code?a.response.code:0;var f={errorName:a.type,errorReason:a.details,errorRetryCount:e.errorRetryCount,errorMessage:(null===(s=a.err)||void 0===s||null===(c=s.message)||void 0===c?void 0:c.slice(0,50))||"unknown",errorResponse:(null===(u=a.response)||void 0===u||null===(y=u.text)||void 0===y?void 0:y.slice(0,50))||"unknown",playbackState:e.state.playbackState};if((0,d.tE)("fatalError",!0,l,f),e.errorRetryCount>0)switch(e.errorRetryCount-=1,a.type){case o().ErrorTypes.NETWORK_ERROR:if(a.details===o().ErrorDetails.MANIFEST_LOAD_ERROR||a.details===o().ErrorDetails.MANIFEST_LOAD_TIMEOUT||a.details===o().ErrorDetails.MANIFEST_LOAD_PARSING_ERROR){var m,b=e.props,v=b.src,h=b.quicExpGroup,S=O(v,h);null===(m=e.hls)||void 0===m||m.loadSource(S)}else{var P;null===(P=e.hls)||void 0===P||P.startLoad()}break;case o().ErrorTypes.MEDIA_ERROR:null===(r=e.hls)||void 0===r||r.recoverMediaError()}}e.updateWatchDurationForCurrentSegment(),e.setState({playbackState:p.Cy.FAILED})})),T(g(e),"handleHlsFragBuffered",(function(t,a){e.firstFragBuffered||(e.initializeSegments(a.frag),e.firstFragBuffered=!0)})),T(g(e),"handleHlsFragChanged",(function(t,a){e.addSegment(a.frag)})),T(g(e),"handleHlsFragLoading",(function(t,a){var r,n=null===(r=a.frag)||void 0===r?void 0:r.url;n&&!e.fragStartupTime[n]&&(e.fragStartupTime[n]={startLoadTime:new Date})})),T(g(e),"handleHlsFragLoaded",(function(t,a){var r;a.frag&&a.frag.loaded&&(e.playbackPerformance.downloadedKiloBytes+=a.frag.loaded/p.Fm);var n=null===(r=a.frag)||void 0===r?void 0:r.url;n&&e.fragStartupTime[n]&&e.fragStartupTime[n].startLoadTime&&(e.fragStartupTime[n].endLoadTime=new Date)})),T(g(e),"handleHlsLevelSwitched",(function(){e.hls&&e.hls.bandwidthEstimate&&(e.lastLevelSwitchKbps=e.hls.bandwidthEstimate/p.bR)})),T(g(e),"handleLoadedMetadata",(function(){e.setState({playbackState:p.Cy.LOADED_METADATA})})),T(g(e),"handleLoadStart",(function(){e.playbackPerformance.loadStartTime=new Date,e.setState({playbackState:p.Cy.LOAD_START})})),T(g(e),"handleLoadedData",(function(){e.setState({playbackState:p.Cy.LOADED_DATA})})),T(g(e),"handlePlaying",(function(){e.playbackPerformance.hasFatalError=!1,e.setPlaybackStartTime(),e.setLastSegmentStartPlayTime(),e.setLastSegmentPlaybackStartDate(),e.updateStallDuration(),e.updatePauseDuration(),e.setState({playbackState:p.Cy.PLAYING})})),T(g(e),"handleUserPause",(function(t){var a=e.props.onPause;e.lastPauseTime=new Date,a&&a(t)})),T(g(e),"handleVideoPause",(function(){e.state.playbackState!==p.Cy.STALLING&&e.state.playbackState!==p.Cy.SEEKING&&(e.updateWatchDurationForCurrentSegment(),e.lastPauseTime||e.updateStallDuration()),e.setState({playbackState:p.Cy.PAUSED})})),T(g(e),"handleSeeking",(function(){e.playbackPerformance.numberOfSeeks+=1;var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&(a.lastStartPlayTime=null),e.state.playbackState!==p.Cy.ENDED&&e.setState({playbackState:p.Cy.SEEKING})})),T(g(e),"handleStalled",(function(){null===e.lastStallTime&&e.state.playbackState!==p.Cy.ENDED&&(e.lastStallTime=new Date,e.playbackPerformance.numberOfStalls+=1),e.setState({playbackState:p.Cy.STALLING})})),T(g(e),"handleTimeUpdate",(function(t){var a=e.props.onTimeChange;a&&a(t),e.state.playbackState===p.Cy.PLAYING&&(e.updateWatchDurationForCurrentSegment(),e.setLastSegmentStartPlayTime())})),T(g(e),"resetPlaybackMetrics",(function(){e.hasPlaybackStarted=!1,e.hasVideoSessionStarted=!1,e.hasVideoSessionEnded=!0,e.lastLevelSwitchKbps=null,e.lastStallTime=null,e.lastPauseTime=null,e.videoSessionId="",e.videoVisibleTime=null,e.logSessionStartOnNextPlay=!1;var t=E(E({},e.playbackPerformance.segments[e.playbackPerformance.segments.length-1]),{},{lastStartPlayTime:null,playbackStartDate:null,switchBitrateKbps:-1,watchedDurationMs:0});e.playbackPerformance.detailedErrors="",e.playbackPerformance.downloadedKiloBytes=0,e.playbackPerformance.errorCode=0,e.playbackPerformance.errorName="",e.playbackPerformance.errorReason="",e.playbackPerformance.hasFatalError=!1,e.playbackPerformance.numberOfStalls=0,e.playbackPerformance.numberOfSeeks=0,e.playbackPerformance.playbackStartTimestamp=null,e.playbackPerformance.totalStallDurationMs=0,e.playbackPerformance.segments=[t]})),T(g(e),"setLastSegmentStartPlayTime",(function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&null===a.lastStartPlayTime&&(a.lastStartPlayTime=e.getCurrentVideoTime())})),T(g(e),"setLastSegmentPlaybackStartDate",(function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1];a&&null===a.playbackStartDate&&(a.playbackStartDate=Date.now())})),T(g(e),"setPlaybackStartTime",(function(){e.hasPlaybackStarted||(e.playbackPerformance.playbackStartTimestamp=Date.now(),e.hasPlaybackStarted=!0)})),T(g(e),"setVideoPlayerRef",(function(t){var a=e.props.setVideoRef;if(t&&(a&&a(t),e.videoPlayerRef=t,e.videoPlayerRef.video)){var r=e.videoPlayerRef.video;r.addEventListener("loadedmetadata",e.handleLoadedMetadata),r.addEventListener("loadeddata",e.handleLoadedData),r.addEventListener("pause",e.handleVideoPause),r.readyState>=3&&(e.setState({canPlayVideo:!0}),e.playbackPerformance.canPlayTime=new Date)}})),T(g(e),"updateStallDuration",(function(){null!==e.lastStallTime&&(e.playbackPerformance.totalStallDurationMs+=new Date-e.lastStallTime,e.lastStallTime=null)})),T(g(e),"updatePauseDuration",(function(){if(null!==e.lastPauseTime){var t=e.lastPauseTime;e.playbackPerformance.totalPauseDurationMs+=new Date-t,e.lastPauseTime=null}})),T(g(e),"updateWatchDurationForCurrentSegment",(function(){var t=e.playbackPerformance.segments,a=t&&t[t.length-1],r=a?a.lastStartPlayTime:null,n=e.getCurrentVideoTime();if(a&&null!==r&&"number"==typeof n&&"number"==typeof r){var o=n-r;o>0&&(a.watchedDurationMs+=o,a.lastStartPlayTime=null)}})),T(g(e),"logPlaybackPerformance",(function(t,a){var r=e.props,n=r.contextLogData,o=void 0===n?{}:n,i=r.userId,l=r.isAutoPlay,s=r.logContextEvent,c=o.is_closeup_video,u=void 0!==c&&c,y=e.playbackPerformance,b=y.canPlayTime,v=y.detailedErrors,h=y.downloadedKiloBytes,S=y.errorCode,P=y.errorName,g=y.errorReason,D=y.hasFatalError,k=y.playbackStartTimestamp,T=y.totalPauseDurationMs,w=y.totalStallDurationMs,R=y.segments,O=y.srcString,L=y.loadStartTime,C=y.numberOfStalls,_=y.numberOfSeeks,M=e.videoPlayerRef&&e.videoPlayerRef.video,A=t===p.DR,V=A&&!e.hasVideoSessionStarted,j=!A&&!e.hasVideoSessionEnded&&e.hasVideoSessionStarted;if(e.hls&&M&&(V||j)){var I,F=-1;b&&L&&(F=b>L?b-L:0);var x=-1;b&&e.videoVisibleTime&&(x=b>e.videoVisibleTime?b-e.videoVisibleTime:0),A&&(e.videoSessionId=(0,p.Y7)(i),e.playerId=e.playerId||(0,p.EB)());var N={autoplaying:l,averageVideoKbps:-1,detailedErrors:v,downloadedKiloBytes:h,isCellular:!1,errorCode:S,errorName:P,errorReason:g,fatalError:D,nativeVideoDurationMs:M.duration*p.gJ||-1,numberOfStalls:C,numberOfSeeks:_,overallPausedDurationMs:T,overallBufferDurationMs:w,overallWatchedDurationMs:-1,rebufferRate:-1,playbackSessionId:e.videoSessionId,playbackStartTimestamp:k||-1,segments:[],sessionMark:t,screenPixelScale:null!==(I=window)&&void 0!==I&&I.devicePixelRatio?window.devicePixelRatio:-1,startupPlayerWidth:M.clientWidth,startupPlayerHeight:M.clientHeight,startupTimeMs:F,startupLatencyMs:x,startupVariantKbps:-1,startupVariantWatchedDurationMs:-1,startupVariantWidth:M.videoWidth,startupVariantHeight:M.videoHeight,videoUrl:O};if(!A&&R.length){var W=e.hls.levels,B=R[0];e.updateWatchDurationForCurrentSegment(),e.updateStallDuration();var H=R.reduce((function(e,t){return t&&"number"==typeof t.level&&W&&W.length>0?e+(W[t.level]||{}).bitrate*(t.watchedDurationMs||0)/p.gJ:e}),0),U=R.reduce((function(e,t){return e+(t.watchedDurationMs||0)}),0),K=null,G=0,z=0;do{G+=R[z].watchedDurationMs,K=K||R[z].level,z+=1}while(z<R.length&&R[z].level===K);N.startupVariantKbps=B.indicatedKbps,N.startupVariantWatchedDurationMs=G,N.startupVariantWidth=B.sourceWidth,N.startupVariantHeight=B.sourceHeight,N.startupPlayerWidth=B.viewportWidth,N.startupPlayerHeight=B.viewportHeight,N.overallWatchedDurationMs=U,U>0?(N.averageVideoKbps=H/(U/p.gJ),N.rebufferRate=e.playbackPerformance.totalStallDurationMs/U):0===U&&(N.averageVideoKbps=-1,N.rebufferRate=-1,N.errorName="invalid_watch_duration"),N.segments=R}else N.errorName="invalid_watch_duration";(0,d.ZP)(N,!0,u,E({playbackState:e.state.playbackState},a));var Z=o.clientTrackingParams,$=o.component,q=o.durationNs,J=o.element,Y=o.objectId,Q=o.pairId,X=o.viewData,ee=o.view,te=o.viewParameter;s({aux_data:E(E({},m(o,f)),{},{is_closeup_video:u,playback_session_id:e.videoSessionId}),clientTrackingParams:Z,component:$,duration_ns:q,element:J,event_data:{videoPerformanceData:N},event_type:3606,object_id_str:Y,pair_id:Q,view_data:X,view_parameter:te,view_type:ee}),A?(e.hasVideoSessionStarted=!0,e.hasVideoSessionEnded=!1):e.resetPlaybackMetrics(),(0,d.tE)(A?"sessionStart":"sessionEnd",!0,u,E({playbackState:e.state.playbackState},a))}})),e}return t=i,(a=[{key:"componentDidMount",value:function(){var e=this.props,t=e.contextLogData,a=void 0===t?{}:t,r=e.playing,n=a.is_closeup_video,o=void 0!==n&&n;this.playbackPerformance.videoCreatedTime=new Date,this.initializeHls(),(0,d.tE)("videoMounted",!0,o),r&&(this.videoVisibleTime=new Date,this.logPlaybackPerformance(p.DR,{initiator:"mount"}))}},{key:"componentDidUpdate",value:function(e){var t,a,r=this.props,n=r.loop,o=r.playing,i=r.src,l=r.visible,s=r.appInFocus;t=e.src,a=i,(w(t)!==w(a)||(Array.isArray(a)?t.length!==a.length||a.some((function(e,a){return!Array.isArray(t)||e.type!==t[a].type||e.src!==t[a].src})):a!==t))&&this.initializeHls(),e.appInFocus&&!s&&(this.logPlaybackPerformance(p.$f,{initiator:"update",loop:n}),this.logSessionStartOnNextPlay=!0),e.visible&&!1===l&&(this.logSessionStartOnNextPlay=!1,this.updatePauseDuration(),this.logPlaybackPerformance(p.$f,{initiator:"update",loop:n})),!1===e.visible&&!0===l&&(this.videoVisibleTime=this.videoVisibleTime||new Date,o?(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(p.DR,{initiator:"update"})):this.logSessionStartOnNextPlay=!0),o&&s&&this.logSessionStartOnNextPlay&&(this.setPlaybackStartTime(),this.setLastSegmentStartPlayTime(),this.setLastSegmentPlaybackStartDate(),this.logPlaybackPerformance(p.DR,{initiator:"update"}),this.logSessionStartOnNextPlay=!1)}},{key:"componentWillUnmount",value:function(){var e=this.props.loop;this.updatePauseDuration(),this.logPlaybackPerformance(p.$f,{initiator:"unmount",loop:e}),this.destroyHls()}},{key:"render",value:function(){var e=this.props,t=e.accessibilityMaximizeLabel,a=e.accessibilityMinimizeLabel,r=e.accessibilityMuteLabel,n=e.accessibilityPauseLabel,o=e.accessibilityPlayLabel,i=e.accessibilityUnmuteLabel,l=e.aspectRatio,s=e.captions,c=e.controls,d=e.loop,p=e.loopOverride,f=e.onDurationChange,m=e.onFullscreenChange,b=e.onLoadedChange,v=e.onPlay,h=e.onPlayheadDown,S=e.onPlayheadUp,P=e.onSeek,g=e.onVolumeChange,D=e.playbackRate,k=e.playing,E=e.playsInline,T=e.poster,w=e.preload,R=e.quicExpGroup,L=e.src,C=e.volume,_=this.state,M=_.canPlayVideo,A=_.isManifestParsed,V=O(L,R);return(0,y.jsx)(u.nk,{accessibilityMaximizeLabel:t,accessibilityMinimizeLabel:a,accessibilityMuteLabel:r,accessibilityPauseLabel:n,accessibilityPlayLabel:o,accessibilityUnmuteLabel:i,aspectRatio:l,captions:s,controls:c,loop:void 0===p?d:p,onDurationChange:f,onEnded:this.handleEnded,onFullscreenChange:m,onLoadStart:this.handleLoadStart,onLoadedChange:b,onPause:this.handleUserPause,onPlay:v,onPlaying:this.handlePlaying,onPlayheadDown:h,onPlayheadUp:S,onReady:this.handleCanPlayVideo,onSeek:P,onSeeking:this.handleSeeking,onStalled:this.handleStalled,onTimeChange:this.handleTimeUpdate,onVolumeChange:g,onWaiting:this.handleStalled,playbackRate:D,playing:A&&M&&k,playsInline:E,poster:T,preload:w,ref:this.setVideoPlayerRef,src:V,volume:C})}}])&&v(t.prototype,a),r&&v(t,r),i}(r.PureComponent);t.Z=(0,r.memo)((function(e){var t=(0,c.B)(),a=t.country,r=t.isAuthenticated,n=t.isBot,o=t.isSocialBot,u=t.unauthId,p=t.userAgent,f=(0,i.Z)(),m=(0,l.Z)(),b=p.browserName,v=p.browserVersion,h=p.isMobile,S=e.contextLogData,P=void 0===S?{}:S,g=e.appInFocus,D=P.is_closeup_video,k=void 0!==D&&D,T=P.view,w=P.viewParameter,R=(0,s.tc)("web_video_quic"),O=null;r&&(O=R().group.length?R().group:null);var C={browserName:b,browserVersion:v,country:a,isAuthenticated:r,isBot:n,is_closeup_video:k,isMobile:h,isSocialBot:o,view:T,viewParameter:w};return(0,d.r$)(C),(0,y.jsx)(L,E(E({},e),{},{userId:m.id||u,appInFocus:g,quicExpGroup:O,logContextEvent:f}))}))}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/98131-35d7c258442901b5.js.map